script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js")
script(src="http://rawgithub.com/sapegin/jquery.mosaicflow/master/jquery.mosaicflow.min.js")

script(src="http://rawgithub.com/matmuchrapna/jquery.imenu/master/jquery.imenu.min.js")
script(src="http://rawgithub.com/paulirish/infinite-scroll/master/jquery.infinitescroll.min.js")

if mode === 'development'
	script(src="http://rawgithub.com/matmuchrapna/Hampi/master/src/js/plugins.js")
	script(src="http://rawgithub.com/matmuchrapna/Hampi/master/src/js/main.js")
if mode === 'production'
	script(src="js/plugins.js")
	script(src="js/main.js")


script.

	$('iframe').prop('width', '100%');
	$(window).resize(function() {
		$('iframe').prop('width', '100%');
	});

	if ($('.post__images-wrap')[0]) {
		$('.post__images-wrap').mosaicflow({
			itemSelector: 'img',
			minItemWidth: 468,
			itemHeightCalculation: 'attribute'
		});
	}

	if ($('.content-wrap_type_index')[0]) {
		var mosaicflow_container = $('.content-wrap_type_index').mosaicflow({
			itemSelector: '.post-preview',
			minItemWidth: 304
		});
	}

	$(function() {

		if ($('.content-wrap_type_index')[0]) {

			$('.content-wrap_type_index').infinitescroll({
				navSelector: '.navigation_type_pagination',
				nextSelector: '.navigation_type_pagination [rel="next"]',
				itemSelector: '.post-preview',
				bufferPx: document.height,
				binder: $(window),
				debug: false,
				prefill: false,
				appendCallback: false
			}, function(items) {
				$.each(items, function(index, value) {
					mosaicflow_container.mosaicflow('add', $(value));
				});
			});
		}
	});